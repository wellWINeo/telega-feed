# Use cases

## Feed

### Get feed

Получение ленты новостей
url: `GET /api/feed`

1. Найти статьи, которые непрочитаны и отсортировать по дате.

### Update feed

Обновление ленты новостей.

Выполняется фоновой задачей по расписанию (например раз в час)

1. Получить список активных источников.
2. По всем источникам получить статьи.
3. Добавить статьи в БД и лентый новостей пользователей

### Star/unstart article

Добавление в избранное / удаление из избранного
urls:
- `POST /api/articles/{id}:star`
- `POST /api/articles/{id}:unstar`

1. Добавление или удаление из статьи из избранного.

### Mark article as read

Отметка статьи как прочитанной

1. Пометить статью как прочитанную

- `POST /api/articles/{id}:read`
- `POST /api/articles/{id}:unread`

## Feed sources management

Управление списком источников

### Get feed sources

Получение списка источников

url: `GET /api/feed-sources`

### Add feed source

Добавление источника

url: `POST /api/feed-sources`

### Update feed source

Обновление списка источников

url: `PUT /api/feed-sources`

### Delete feed source

url: `DELETE /api/feed-sources/{id}`

## AI features

Возможности связанные с использованием LLM.

### Get daily digest

Изначально предполагалось генерировать его фоновой задачей
по расписанию. Но в таком случае может генерироваться неактульаный
дайджест, также некоторые пользователи могут заходить не каждый 
день, но для них будет продолжать генерироваться дайджест, что
неэффективно.

url: `GET /api/feed/digest`

1. Проверить нет ли уже сгенерированного дайджеста на сегодня. 
Если есть, то вернуть его.
2. Если дайджеста на сегодня нет, то найти все статьи за сегодня.
3. Передать список статей LLM для генерации дайджеста.
4. Полученный дайджест сохранить в БД и вернуть пользователю.

### Get article's summary

Получение краткого пересказа статьи.

url: `GET /api/articles/{id}/summary`

1. Проверить, нет ли уже сгенерированного пересказа в БД
2. Если нет, то сгенерировать новый.
3. Новый пересказ добавить в БД и вернуть пользователю.

Также должна быть возможность перегенерировать пересказ.